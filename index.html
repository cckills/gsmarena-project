<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
/* âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± */

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
    }

    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¬ÙˆØ§Ù„ â†’ Ø¹Ø±Ø¶ Ø¹Ù…ÙˆØ¯ÙŠ */
    @media (max-width: 768px) {
      .results-grid {
        display: flex !important;
        flex-direction: column !important;
      }
    }

    /* Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ */
    @media (min-width: 1200px) {
      .container {
        max-width: 1100px;
      }
    }
   

 body.loading {
    overflow: hidden;
  }
  body.loading #loader {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .loader-overlay {
    position: fixed;
    inset: 0;
    background: #2aa53e6b;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.8s ease, visibility 0.8s ease;
    color: white;
    font-family: "Cairo", sans-serif;
  }

  .loader-overlay.hidden {
    opacity: 0;
    visibility: hidden;
  }

  .phone {
    width: 190px;
    height: 360px;
    border-radius: 28px;
    background: linear-gradient(145deg, #0b0b0b, #1e1e1e);
    position: relative;
    border: 3px solid rgba(100,100,100,0.3);
    box-shadow:
      0 25px 60px rgba(0,0,0,0.6),
      inset 0 0 20px rgba(255,255,255,0.05);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .phone::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,0.15) 50%, transparent 60%);
    animation: shine 3s infinite linear;
    pointer-events: none;
  }

  @keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .phone::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 28px;
    box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
  }

  .speaker {
    position: absolute;
    top: 14px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 6px;
    background: #181818;
    border-radius: 4px;
  }

  .camera {
    position: absolute;
    top: 10px;
    right: 14px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: radial-gradient(circle, #00ffcc 0%, #003333 80%);
    box-shadow: 0 0 10px #00ffcc;
    animation: camBlink 2.5s infinite;
  }

  @keyframes camBlink {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }

  .battery {
    width: 60px;
    height: 100px;
    background: #111;
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    position: relative;
    overflow: hidden;
  }

  .battery::after {
    content: "";
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 6px;
    background: #333;
    border-radius: 3px;
  }

  .battery-level {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20%;
    background: linear-gradient(to top, #00ff55, #66ff99);
    animation: fillBattery 2.5s infinite ease-in-out;
    box-shadow: 0 0 12px #00ff55;
  }

  @keyframes fillBattery {
    0% { height: 20%; }
    50% { height: 95%; }
    100% { height: 20%; }
  }

  .cable {
    position: absolute;
    bottom: -80px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 80px;
    background: linear-gradient(to bottom, #fff, #a884ff);
    box-shadow: 0 0 10px #a884ff;
  }

  .cable::before {
    content: "";
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 10px;
    background: #fff;
    border-radius: 3px;
  }

  .loading-text {
    margin-top: 20px;
    font-size: 1.2rem;
    font-weight: 500;
    letter-spacing: 1px;
    animation: fadeText 1.5s infinite ease-in-out;
  }

  @keyframes fadeText {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }

   :root {
    --bg-light: #f5f8ff;
    --text-light: #000;
    --card-bg-light: #ffffff;
    --bg-dark: #0f0f11;
    --text-dark: #e1e1e1;
    --card-bg-dark: rgba(255, 255, 255, 0.03);
    --accent: #0d6efd;
   }

   body {
    padding: 20px;
    background: var(--bg-light);
    color: var(--text-light);
    transition:
     background 0.5s ease,
     color 0.5s ease;
    min-height: 100vh;
   }

   body.dark-mode {
    background: var(--bg-dark);
    color: var(--text-dark);
   }

   .brand {
    font-weight: 700;
    color: var(--accent);
   }
   .phone-thumb {
    width: 100%;
    height: 150px;
    object-fit: contain;
    border-radius: 10px;
    background: #f8f9fa;
   }
   .specs-container {
    max-height: 60vh;
    overflow: auto;
   }

   .card {
    background: var(--card-bg-light);
    transition:
     background 0.5s ease,
     color 0.5s ease,
     box-shadow 0.4s ease;
   }
   body.dark-mode .card {
    background: var(--card-bg-dark);
    box-shadow: 0 2px 10px rgba(255, 255, 255, 0.03);
   }

   /* Grid & list */
   .results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 1rem;
    padding: 1rem;
    transition: all 0.4s ease;
   }
   .results-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
    transition: all 0.4s ease;
   }
   .result-item {
    background: var(--card-bg-light);
    border-radius: 15px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    transition:
     transform 0.25s ease,
     background 0.4s ease;
    cursor: pointer;
    overflow: hidden;
    padding: 1rem;
    text-align: center;
   }
   body.dark-mode .result-item {
    background: var(--card-bg-dark);
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.03);
   }
   .result-item.d-flex {
    display: flex;
    align-items: center;
   }
   .result-item:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
   }
   .result-thumb {
    width: 90px;
    height: 90px;
    object-fit: contain;
    margin-bottom: 10px;
    transition: filter 0.3s;
   }
   body.dark-mode .result-thumb {
    filter: brightness(0.9);
   }
   .result-item .fw-bold {
    color: var(--accent);
    font-size: 1rem;
   }
   .result-item .text-muted {
   /*  color: #6c757d;*/
    font-size: 0.85rem;
        --bs-text-opacity: 1;
    color: var(--bs-secondary-color) !important;
}

   /* Modal */
   #specModal .modal-content {
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
   }
   #specModal .modal-header {
    background: linear-gradient(135deg, #007bff, #6610f2);
    color: #fff;
    border-bottom: none;
   }
   #specModal .modal-title {
    font-weight: 700;
    font-size: 1.2rem;
   }
   #specModal .modal-body {
    background: #f9fafb;
    padding: 1.5rem;
    transition: background 0.4s ease;
   }
   body.dark-mode #specModal .modal-body {
    background: #121212;
    color: #eee;
   }
   #specModal table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
    transition: background 0.4s ease;
   }
   body.dark-mode #specModal table {
    background: #1b1b1b;
    color: #ddd;
   }

   
   /* Floating theme button */
   #themeToggle {
    position: fixed;
    bottom: 20px;
    right: 20px; /* ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª Ø³Ø§Ø¨Ù‚Ø§Ù‹ */
    z-index: 3000;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #0d6efd, #66a7ff);
    color: #fff;
    border: none;
    box-shadow: 0 8px 24px rgba(13, 110, 253, 0.18);
    cursor: pointer;
    transition:
     transform 0.2s ease,
     opacity 0.2s ease;
   }
   #themeToggle:hover {
    transform: scale(1.08);
   }

   /* fade transition wrapper */
   .page-fade {
    transition: opacity 0.45s ease;
   }
   .page-fade.fade-out {
    opacity: 0.35;
   }

   @media (max-width: 576px) {
    .result-thumb {
     width: 64px;
     height: 64px;
    }
    .phone-thumb {
     height: 120px;
    }
    #themeToggle {
     width: 44px;
     height: 44px;
     bottom: 14px;
     right: 14px;
    }
   }
  </style>
 </head>
 
 <body>
  <!-- âœ… Ø§Ù„Ù„ÙˆØ¯Ø± Ø§Ù„ÙƒØ§Ù…Ù„ -->
<div id="loader" class="loader-overlay">
  <div class="phone">
    <div class="speaker"></div>
    <div class="camera"></div>
    <div class="battery">
      <div class="battery-level"></div>
    </div>
    <div class="cable"></div>
  </div>
  <div class="loading-text">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

  <audio id="chargeSound" preload="auto">
    <source src="https://actions.google.com/sounds/v1/cartoon/siren_whistle.ogg" type="audio/ogg">
  </audio>
</div>

  <div class="container page-fade" id="pageWrapper">
   <header class="d-flex align-items-center justify-content-between mb-4">
    <div class="d-flex align-items-center">
     <img
      src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><rect rx='8' width='100%' height='100%' fill='%230d6efd'/><text x='50%' y='55%' fill='white' font-size='18' font-family='Arial' text-anchor='middle' dominant-baseline='middle'>PS</text></svg>"
      alt="logo"
      class="me-2"
     />
     <div>
      <div class="brand">Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ</div>
      <div class="text-muted small">Ø¨Ø±Ù…Ø¬Ù‡ ÙˆØªØµÙ…ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ù„ÙŠÙ… Ø§Ø³Ù…Ø§Ø¹ÙŠÙ„</div>
     </div>
    </div>
   </header>

   <div class="card mb-3">
    <div class="card-body">
     <div class="row g-2">
      <div class="col-12 col-md-9">
  <div class="form-text mt-2">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¬Ø²Ø¡ Ù…Ù†Ù‡.</div>
       <input id="query" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‡Ø§ØªÙ (Ù…Ø«Ø§Ù„: Y9 Ø§Ùˆ STK-L21 )" />
      </div>
      <div class="col-12 col-md-3 d-grid">
       <button id="searchBtn" class="btn btn-primary">Ø¨Ø­Ø«</button>
      </div>
     </div>
    </div>
   </div>

   <div class="card p-3 mb-3">
    <div class="d-flex justify-content-between align-items-center mb-2">
     <div class="fw-bold">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</div>
     <div><button id="toggleView" class="btn btn-outline-secondary btn-sm">Ø¹Ø±Ø¶ Ø´Ø¨ÙƒÙŠ</button></div>
    </div>
    <div id="results" class="results-list"></div>
   </div>

   <footer class="text-center text-muted small mb-4">Ø¨Ø±Ù…Ø¬Ù‡ ÙˆØªØµÙ…ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ù„ÙŠÙ… Ø§Ø³Ù…Ø§Ø¹ÙŠÙ„</footer>
  </div>

  <!-- floating theme toggle -->
  <button id="themeToggle" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">ğŸŒ™</button>

  <!-- Modal (Ù…Ø­ØªÙˆÙ‰ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª ÙŠØªÙ… Ù…Ù„Ø¤Ù‡) -->
  <div
   class="modal fade"
   id="specModal"
   data-bs-backdrop="static"
   data-bs-keyboard="false"
   tabindex="-1"
   aria-hidden="true"
  >
   <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content shadow-lg rounded-4">
     <div class="modal-header">
      <h5 class="modal-title" id="modalTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‡Ø§ØªÙ</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚"></button>
     </div>
     <div class="modal-body">
      <ul class="nav nav-tabs" id="specTabs" role="tablist">
       <li class="nav-item">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-overview" type="button">
         Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
        </button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-network" type="button">Ø§Ù„Ø´Ø¨ÙƒØ©</button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-display" type="button">Ø§Ù„Ø´Ø§Ø´Ø©</button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-camera" type="button">Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-hardware" type="button">Ø§Ù„Ø¹ØªØ§Ø¯</button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-battery" type="button">Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©</button>
       </li>
       <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-other" type="button">Ø£Ø®Ø±Ù‰</button>
       </li>
      </ul>
      <div class="tab-content mt-3" id="modalTabsContent">
       <div class="tab-pane fade show active" id="tab-overview"></div>
       <div class="tab-pane fade" id="tab-network"></div>
       <div class="tab-pane fade" id="tab-display"></div>
       <div class="tab-pane fade" id="tab-camera"></div>
       <div class="tab-pane fade" id="tab-hardware"></div>
       <div class="tab-pane fade" id="tab-battery"></div>
       <div class="tab-pane fade" id="tab-other"></div>
      </div>
     </div>
    </div>
   </div>
  </div>



  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const loader = document.getElementById("loader");
  const chargeSound = document.getElementById("chargeSound");

  function showLoader(text = "Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...") {
    document.body.classList.add("loading");
    loader.querySelector(".loading-text").textContent = text;
  playSound(soundLoad); // â† ØµÙˆØª Ø§Ù„ØªØ­Ù…ÙŠÙ„

    if (chargeSound) {
      chargeSound.currentTime = 0;
      chargeSound.play().catch(() => {});
    }

    loader.classList.remove("hidden");
  }

  function hideLoader() {
    loader.classList.add("hidden");
    document.body.classList.remove("loading");
  }

  
   // Fade wrapper (Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù†Ø§Ø¹Ù… Ø¹Ù†Ø¯ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…)
   const pageWrapper = document.getElementById("pageWrapper");

   // Theme toggle (ÙŠØ¯ÙˆÙŠ ÙÙ‚Ø·) + Ø­ÙØ¸ ÙÙŠ localStorage
   const themeToggle = document.getElementById("themeToggle");
   const savedTheme = localStorage.getItem("theme") || "light";
   if (savedTheme === "dark") {
    document.body.classList.add("dark-mode");
    themeToggle.textContent = "â˜€ï¸";
   } else {
    themeToggle.textContent = "ğŸŒ™";
   }

   themeToggle.addEventListener("click", () => {
    // Ù…Ø¤Ø«Ø± ØªÙ„Ø§Ø´ÙŠ Ù‚ØµÙŠØ±
    pageWrapper.classList.add("fade-out");
    setTimeout(() => {
     document.body.classList.toggle("dark-mode");
     const isDark = document.body.classList.contains("dark-mode");
     themeToggle.textContent = isDark ? "â˜€ï¸" : "ğŸŒ™";
     localStorage.setItem("theme", isDark ? "dark" : "light");
     pageWrapper.classList.remove("fade-out");
    }, 180);
   });

   // Init modal
   const modalEl = new bootstrap.Modal(document.getElementById("specModal"), { backdrop: "static", keyboard: false });

   // View mode (grid/list)
   let isGrid = localStorage.getItem("viewMode") === "grid";
   const resultsEl = document.getElementById("results");
   const toggleBtn = document.getElementById("toggleView");

   function applyViewMode() {
    resultsEl.className = isGrid ? "results-grid" : "results-list";
    toggleBtn.textContent = isGrid ? "Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…" : "Ø¹Ø±Ø¶ Ø´Ø¨ÙƒÙŠ";
    if (window.currentResults) renderResults(window.currentResults);
   }
   applyViewMode();
   toggleBtn.addEventListener("click", () => {
    isGrid = !isGrid;
    localStorage.setItem("viewMode", isGrid ? "grid" : "list");
    applyViewMode();
   });
// ğŸ§  ØªØ­Ø¯ÙŠØ¯ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ API Ø­Ø³Ø¨ Ø§Ù„Ø¨ÙŠØ¦Ø© (Ù…Ø­Ù„ÙŠ / Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†)
const API_BASE =
  location.hostname === "localhost" || location.hostname === "127.0.0.1"
    ? "http://localhost:3000" // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ù„ÙŠ
    : "https://gsmarena-project.vercel.app";  // <-- ØºÙŠÙ‘Ø±Ù‡ Ø¥Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø³ÙŠØ±ÙØ±Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ Ø£Ùˆ API Ø§Ù„Ù…Ø³ØªØ¶ÙŠÙ

   // Search handlers
   const queryEl = document.getElementById("query");
   document.getElementById("searchBtn").addEventListener("click", doSearch);
   queryEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") doSearch();
   });

   async function doSearch() {
    const q = queryEl.value.trim();
    if (!q) {
     await Swal.fire("Ù…Ù„Ø§Ø­Ø¸Ø©", "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ù„Ù„Ø¨Ø­Ø«.", "info");
     return;
    }
// Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ¯Ø± Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø«
  showLoader("Ø¬Ø§Ø±Ù Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‡Ø§ØªÙ...");
      try {
     // <-- Ù‡Ù†Ø§ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø¨API Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø¯ÙŠÙƒ
    // const resp = await fetch("https://example.com/api/search?name=" + encodeURIComponent(q));
     const resp = await fetch(`${API_BASE}/api/search?name=${encodeURIComponent(q)}`)
     if (!resp.ok) throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + resp.status);

     const data = await resp.json();

     // ğŸ”„ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø«Ù… Ù†Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª ÙƒÙ„Ù‡Ø§
     await renderResults(data);
     playSound(soundSuccess); // â† ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­

    } catch (err) {
      playSound(soundError); // â† ØµÙˆØª Ø§Ù„Ø®Ø·Ø£
      resultsEl.innerHTML = '<div class="text-danger text-center py-3">ÙØ´Ù„ Ø§Ù„Ø¨Ø­Ø«: ' + (err.message || err) + "</div>";
    } finally {
      // âœ… Ù„Ø§ Ù†Ø®ÙÙŠ Ø§Ù„Ù„ÙˆØ¯Ø± Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ ÙƒÙ„ Ø´ÙŠØ¡
      hideLoader();
    }

   }


   // Render results
   async function renderResults(items) {
    window.currentResults = items;
    
if (!items || items.length === 0) {
  Swal.fire({
    icon: 'info',
    title: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬',
    text: 'Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù‡Ø§ØªÙ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ø¨Ø­Ø«.',
    confirmButtonText: 'Ø­Ø³Ù†Ù‹Ø§',
    backdrop: `rgba(0,0,0,0.6)`
  });
  resultsEl.innerHTML = ''; // Ù…Ø³Ø­ Ø£ÙŠ Ù†ØªØ§Ø¦Ø¬ Ø³Ø§Ø¨Ù‚Ø©
  return;
}
    resultsEl.innerHTML = "";

    for (const it of items) {
     const div = document.createElement("div");
     div.className = isGrid ? "result-item" : "result-item d-flex";

     const thumb = `<img src="${it.thumb || ""}" class="${isGrid ? "result-thumb" : "result-thumb me-3"}" alt="ØµÙˆØ±Ø©">`;

     // Ø¹Ù†ØµØ± Ù„Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬
     const nameChipHTML = document.createElement("div");
     nameChipHTML.className = isGrid ? "" : "flex-grow-1 ms-3";

     // Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§: Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙ‚Ø·
     nameChipHTML.innerHTML = `<div class="fw-bold">${it.title}</div><div class="text-muted small mt-1">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬...</div>`;

     if (isGrid) {
      div.innerHTML = `${thumb}`;
      div.appendChild(nameChipHTML);
     } else {
      div.innerHTML = `${thumb}`;
      div.appendChild(nameChipHTML);
     }

     resultsEl.appendChild(div);

     // Ø§Ù„Ø¢Ù† fetch ØµØºÙŠØ± Ù„Ø¬Ù„Ø¨ ØµÙØ­Ø© Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Chipset
     try {
     await new Promise(r => setTimeout(r, 3000)); // â³ Ø§Ù†ØªØ¸Ø± 3 Ø«ÙˆØ§Ù†Ù Ù‚Ø¨Ù„ ÙƒÙ„ Ø·Ù„Ø¨

      //const resp = await fetch("https://example.com/api/phone?path=" + encodeURIComponent(it.path));
const resp = await fetch(`${API_BASE}/api/phone?path=${encodeURIComponent(it.path)}`)

      if (!resp.ok) throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„");
      const html = await resp.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");

      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Chipset Ø¯Ø§Ø®Ù„ ØµÙØ­Ø© Ø§Ù„Ø¹ØªØ§Ø¯
      let chipText = "â€”";
      const dsChip = doc.querySelector('[data-spec="chipset"], [data-spec="platform"], [data-spec="soc"]');
      if (dsChip) chipText = dsChip.innerText.trim();

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ØµØ± Ø£Ø³ÙÙ„ Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²
      nameChipHTML.innerHTML = `<div class="fw-bold">${it.title}</div>
                                <div class="text-muted small mt-1">${chipText}</div>`;
     } catch (err) {
      nameChipHTML.innerHTML = `<div class="fw-bold">${it.title}</div>
                                <div class="text-muted small mt-1">â€”</div>`;
     }

     // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©
     div.addEventListener("click", () => openPhone(it.path, it.title));
     //  return true;

    }
   }

   // Open phone - fetch details and parse
async function openPhone(path, title) {
  showLoader("Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù‡Ø§ØªÙ...");
  playSound(soundSuccess); // ğŸµ ØµÙˆØª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø¨

  try {
    // â³ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    await new Promise(r => setTimeout(r, 4000));

    const resp = await fetch(`${API_BASE}/api/phone?path=${encodeURIComponent(path)}`);
    if (!resp.ok) throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + resp.status);
    const html = await resp.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");

    // ğŸ”„ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    document.querySelectorAll("#modalTabsContent .tab-pane").forEach((tab) => (tab.innerHTML = ""));

    // ğŸ–¼ï¸ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù†
    const imgSrc = doc.querySelector("img")?.src || "";
    const overviewEl = document.getElementById("tab-overview");
    overviewEl.innerHTML = `
      <div class="card mb-3 shadow-sm border-0 rounded-4">
        <div class="row g-0 align-items-center">
          <div class="col-md-4 text-center p-3">
            <img src="${imgSrc}" class="img-fluid rounded-3" style="max-height:250px; object-fit:contain;" alt="${title}">
          </div>
          <div class="col-md-8 p-3">
            <h4 class="fw-bold mb-2">${title}</h4>
            <p class="text-muted mb-2">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©</p>
            <div class="row g-2" id="spec-cards"></div>
          </div>
        </div>
      </div>
        `;

     // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬Ø¯Ø§ÙˆÙ„
     const tables = Array.from(doc.querySelectorAll("table"));
     let yearText = "â€”",
      osText = "â€”",
      chipText = "â€”",
      cpuText = "â€”",
      gpuText = "â€”",
      memText = "â€”";

     // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø¨Ø¯Ù‚Ø©
     tables.forEach((tbl) => {
      const rows = Array.from(tbl.querySelectorAll("tr"));
      rows.forEach((row) => {
       const th = row.querySelector("th")?.innerText?.toLowerCase() || "";
       const td = row.querySelector("td")?.innerText?.trim() || "";

       if (th.includes("os") && td) osText = td;
       if ((th.includes("announced") || th.includes("launch")) && td) {
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³Ù†Ø© Ù…Ù† Ø§Ù„Ù†Øµ (Ù…Ø«Ù„Ø§Ù‹: "Announced 2019, March")
        const match = td.match(/\d{4}/);
        if (match) yearText = match[0];
        else yearText = td;
       }
       if ((th.includes("chipset") || th.includes("platform") || th.includes("Ø§Ù„Ø´Ø±ÙŠØ­Ø©")) && td) chipText = td;

       if (th.includes("cpu") && td) cpuText = td;
       if (th.includes("gpu") && td) gpuText = td;
       if ((th.includes("internal") || th.includes("memory")) && td) memText = td;
      });
     });
     // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† data-spec Ù…Ø¹ ØªØºØ·ÙŠØ© Ø¨Ø¯Ø§Ø¦Ù„ Ù…Ø­ØªÙ…Ù„Ø©
     const dsChip = doc.querySelector('[data-spec="chipset"], [data-spec="platform"], [data-spec="soc"]');
     if (dsChip) chipText = dsChip.innerText.trim();

     const dsCPU = doc.querySelector('[data-spec="cpu"], [data-spec="processor"]');
     if (dsCPU) cpuText = dsCPU.innerText.trim();

     const dsGPU = doc.querySelector('[data-spec="gpu"], [data-spec="graphics"]');
     if (dsGPU) gpuText = dsGPU.innerText.trim();

     const dsMem = doc.querySelector('[data-spec="internalmemory"], [data-spec="memory"], [data-spec="storage"]');
     if (dsMem) memText = dsMem.innerText.trim();

     const colors = ["#e0f7fa", "#ffe0b2", "#f3e5f5", "#c8e6c9", "#fff9c4", "#ffccbc"];
     const specs = [
      { icon: "ğŸ“…", name: "Ø³Ù†Ø© Ø§Ù„Ø¥ØµØ¯Ø§Ø±", value: yearText },
      { icon: "âš™ï¸", name: "Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„", value: osText },
      { icon: "ğŸ§ ", name: "Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ / Ø§Ù„Ø´Ø±ÙŠØ­Ø©", value: chipText },
      { icon: "âš¡", name: "ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©", value: cpuText },
      { icon: "ğŸ®", name: "ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ§Øª", value: gpuText },
      { icon: "ğŸ’¾", name: "Ø§Ù„Ø°Ø§ÙƒØ±Ø©", value: memText },
     ];

     const specContainer = document.getElementById("spec-cards");
     specContainer.innerHTML = "";
     specs.forEach((s, i) => {
      const card = document.createElement("div");
      card.className = "col-6 col-md-4";
      card.innerHTML = `
        <div class="card text-center p-3 shadow-sm h-100" style="background:${colors[i]}; border-radius:12px;">
          <div class="fw-bold mb-1">${s.icon} ${s.name}</div>
          <div class="text-muted small">${s.value}</div>
        </div>
      `;
      specContainer.appendChild(card);
     });

     // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
     tables.forEach((tbl) => {
      const headerText = (tbl.querySelector("th")?.innerText || "").toLowerCase();
      let target = "#tab-other";
      if (headerText.includes("network") || headerText.includes("gsm") || headerText.includes("lte"))
       target = "#tab-network";
      else if (headerText.includes("display") || headerText.includes("screen") || headerText.includes("size"))
       target = "#tab-display";
      else if (headerText.includes("camera") || headerText.includes("photo") || headerText.includes("video"))
       target = "#tab-camera";
      else if (headerText.includes("platform") || headerText.includes("chipset") || headerText.includes("memory"))
       target = "#tab-hardware";
      else if (headerText.includes("battery")) target = "#tab-battery";
      else if (headerText.includes("launch") || headerText.includes("body")) target = "#tab-overview";

      try {
       const clone = tbl.cloneNode(true);
       document.querySelector(target).appendChild(clone);
      } catch (e) {
       document.querySelector(target).innerHTML += tbl.outerHTML;
      }
     });


    document.getElementById("modalTitle").textContent = title;

    // âœ… Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    hideLoader();

    // âœ… ØªÙ†Ø¨ÙŠÙ‡ Ù†Ø¬Ø§Ø­ Ù‚Ø¨Ù„ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    await Swal.fire({
      icon: "success",
      title: "ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…",
      text: "Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¢Ù†...",
      timer: 2000, // 2 Ø«Ø§Ù†ÙŠØ©
      timerProgressBar: true,
      showConfirmButton: false,
      background: "#ffffff",
      color: "#333",
      backdrop: "rgba(0,0,0,0.4)",
      didOpen: () => {
        Swal.getPopup().style.borderRadius = "1rem";
        Swal.getPopup().style.boxShadow = "0 0 15px rgba(0,0,0,0.2)";
      }
    });

    // âœ… Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
    modalEl.show();

  } catch (err) {
    hideLoader();
    await Swal.fire({
      icon: "error",
      title: "Ø®Ø·Ø£",
      text: "ÙØ´Ù„ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ: " + (err.message || err),
      confirmButtonText: "Ø¥ØºÙ„Ø§Ù‚",
      backdrop: `rgba(0,0,0,0.6)`
    });
    return;
  }
}
   // Ù…Ù†Ø¹ Ø£ÙŠ ÙƒÙˆØ¯ ÙŠÙÙ…Ù†Ø¹ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â€” Ù„Ø§ Ù†ÙØ¹Ù„ Ø£ÙŠ Ù‚ÙŠÙˆØ¯ Ù‡Ù†Ø§.
   queryEl.addEventListener("input", async (e) => {
    const arabicPattern = /[\u0600-\u06FF]/g;
    if (arabicPattern.test(queryEl.value)) {
     queryEl.value = queryEl.value.replace(arabicPattern, ""); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

     await Swal.fire({
      title: "Ø¹ÙÙˆØ§",
      text: "Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø«!",
      icon: "warning",
      confirmButtonText: "Ø­Ø³Ù†Ù‹Ø§",
      allowOutsideClick: false,
      allowEscapeKey: false,
      backdrop: `rgba(0,0,0,0.6)`,
      customClass: { popup: "swal2-rounded swal2-bordered alert-shake" },
      didOpen: () => {
       const swalContainer = Swal.getPopup();
       Swal.getContainer().addEventListener("mousedown", (e) => {
        if (!swalContainer.contains(e.target)) {
         swalContainer.classList.add("shake-pulse");
         setTimeout(() => swalContainer.classList.remove("shake-pulse"), 600);
        }
       });
      },
     });
    }
   });


   // ğŸ”‹ Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ¯Ø±
function showLoader(text = "Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...") {
  const loader = document.getElementById("loader");
  const chargeSound = document.getElementById("chargeSound");

  document.body.classList.add("loading");
  loader.querySelector(".loading-text").textContent = text;

  // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
  if (chargeSound) {
    chargeSound.currentTime = 0;
    chargeSound.play().catch(() => {});
  }

  loader.classList.remove("hidden");
}

// âŒ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù„ÙˆØ¯Ø±
function hideLoader() {
  const loader = document.getElementById("loader");
  loader.classList.add("hidden");
  document.body.classList.remove("loading");
}

// âœ… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
window.addEventListener("load", async () => {
  showLoader("Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...");

  // Ù†Ø­Ø§ÙˆÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ø¨Ø± Ø·Ù„Ø¨ ØµØºÙŠØ±
  try {
    const testUrl = `${API_BASE}/api/ping`; // ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ø£ÙŠ endpoint Ø¨Ø³ÙŠØ·
    const resp = await fetch(testUrl, { method: "GET" });
    if (!resp.ok) throw new Error("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API");

    // ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­ â†’ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù„ÙˆØ¯Ø± Ù…Ø¨Ø§Ø´Ø±Ø©
    hideLoader();

  } catch (err) {
    // Ù„Ùˆ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø«Ù… Ø£Ø®ÙÙ Ø§Ù„Ù„ÙˆØ¯Ø± Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„ØªØ¬Ù…Ù‘Ø¯
    console.warn("Network slow or unreachable:", err);
    setTimeout(() => hideLoader(), 4000);
  }
});


const soundLoad = document.getElementById("soundLoad");
const soundSuccess = document.getElementById("soundSuccess");
const soundError = document.getElementById("soundError");

function playSound(audio) {
  if (!audio) return;
  audio.currentTime = 0;
  audio.play().catch(() => {});
}
   // --- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª ---


   <!-- âœ… Ø³ÙƒØ±Ø¨Øª ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø´Ø¨ÙƒØ© ØªØªØºÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø­Ø³Ø¨ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© -->
    const results = document.getElementById('results');

    function updateLayout() {
      if (window.innerWidth <= 768) {
        results.classList.remove('results-grid');
      } else {
        results.classList.add('results-grid');
      }
    }

    window.addEventListener('resize', updateLayout);
    window.addEventListener('load', updateLayout);
  </script>
  <!-- Ø£ØµÙˆØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø© -->
<audio id="soundLoad" preload="auto">
  <source src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" type="audio/ogg">
</audio>
<audio id="soundSuccess" preload="auto">
  <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
</audio>
<audio id="soundError" preload="auto">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
</audio>
 </body>
</html>
